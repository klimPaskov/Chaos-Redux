@CHEM_FIRST_USE_SURPRISE_ATTACK_BONUS = 0.05
@CHEM_FIRST_USE_SURPRISE_BREAKTHROUGH_BONUS = 0.05

ideas = {

    country = {

        ###############################################################################################################
        # Chemical Warfare
        ###############################################################################################################

        # One-time initial battlefield surprise from first live chemical use in combat.
        chemical_first_use_surprise_idea = {
            picture = generic_infantry_bonus # TODO: Add custom icon

            allowed_civil_war = {
                always = yes
            }

            modifier = {
                army_attack_factor = @CHEM_FIRST_USE_SURPRISE_ATTACK_BONUS
                breakthrough_factor = @CHEM_FIRST_USE_SURPRISE_BREAKTHROUGH_BONUS
            }
        }


        ###############################################################################################################
        # Biowarfare
        ###############################################################################################################


        # Antibiotics mass production - provides contamination resistance based on civilian factories
        anthrax_antibiotics_mass_production_idea = {
            picture = anthrax_antibiotics

            allowed_civil_war = {
                always = yes
            }

            on_add = {
                # Apply antibiotics protection to all contaminated states
                apply_anthrax_antibiotics_protection = yes
            }

            on_remove = {
                # Remove antibiotics protection from all states
                remove_anthrax_antibiotics_protection = yes
            }

            modifier = {
                consumer_goods_factor = 0.10
            }
        }

        # Research slowdown during retroactive antibiotics development
        developing_anthrax_antibiotics_research_slowdown = {
            picture = generic_research_bonus

            allowed_civil_war = {
                always = yes
            }

            modifier = {
                research_speed_factor = -0.20
            }

            cancel = {
                NOT = { has_country_flag = developing_anthrax_antibiotics_retroactively }
            }
        }

        # Plague antibiotics mass production - provides contamination resistance based on civilian factories
        plague_antibiotics_mass_production_idea = {
            picture = plague_antibiotics

            allowed_civil_war = {
                always = yes
            }

            on_add = {
                # Apply antibiotics protection to all contaminated states
                apply_plague_antibiotics_protection = yes
            }

            on_remove = {
                # Remove antibiotics protection from all states
                remove_plague_antibiotics_protection = yes
            }

            modifier = {
                consumer_goods_factor = 0.15  # Higher cost than anthrax due to plague's severity
            }
        }

        # Research slowdown during retroactive plague antibiotics development
        developing_plague_antibiotics_research_slowdown = {
            picture = generic_research_bonus

            allowed_civil_war = {
                always = yes
            }

            modifier = {
                research_speed_factor = -0.25  # Slightly higher penalty than anthrax
            }

            cancel = {
                NOT = { has_country_flag = developing_plague_antibiotics_retroactively }
            }
        }

        # Tularemia antibiotics mass production - provides contamination resistance based on civilian factories
        tularemia_antibiotics_mass_production_idea = {
            picture = tularemia_antibiotics

            allowed_civil_war = {
                always = yes
            }

            on_add = {
                # Apply antibiotics protection to all contaminated states
                apply_tularemia_antibiotics_protection = yes
            }

            on_remove = {
                # Remove antibiotics protection from all states
                remove_tularemia_antibiotics_protection = yes
            }

            modifier = {
                consumer_goods_factor = 0.08  # Lower cost than anthrax/plague due to easier treatment
            }
        }

        # Research slowdown during retroactive tularemia antibiotics development
        developing_tularemia_antibiotics_research_slowdown = {
            picture = generic_research_bonus

            allowed_civil_war = {
                always = yes
            }

            modifier = {
                research_speed_factor = -0.15  # Lower penalty than anthrax/plague due to easier research
            }

            cancel = {
                NOT = { has_country_flag = developing_tularemia_antibiotics_retroactively }
            }
        }

        # Smallpox vaccination mass program - provides contamination resistance based on civilian factories
        smallpox_vaccination_program_idea = {
            picture = smallpox_vaccination

            allowed_civil_war = {
                always = yes
            }

            on_add = {
                # Apply vaccination protection to all contaminated states
                apply_smallpox_vaccination_protection = yes
            }

            on_remove = {
                # Remove vaccination protection from all states
                remove_smallpox_vaccination_protection = yes
            }

            modifier = {
                consumer_goods_factor = 0.25  # Very high cost for strategic weapon countermeasure
                political_power_gain = -0.25  # Administrative burden
            }
        }
    }
}