# Livens support scripted triggers:
# - Character-safe checks using country template queries through FROM scope.

chem_has_chlorine_livens_support_in_template = {
	FROM = {
		has_template_containing_unit = livens_projector_support_chlorine
	}
}

chem_has_phosgene_livens_support_in_template = {
	FROM = {
		has_template_containing_unit = livens_projector_support_phosgene
	}
}

chem_has_mustard_livens_support_in_template = {
	FROM = {
		has_template_containing_unit = livens_projector_support_mustard
	}
}

chem_has_lewisite_livens_support_in_template = {
	FROM = {
		has_template_containing_unit = livens_projector_support_lewisite
	}
}

chem_has_sarin_livens_support_in_template = {
	FROM = {
		has_template_containing_unit = livens_projector_support_sarin
	}
}

chem_has_soman_livens_support_in_template = {
	FROM = {
		has_template_containing_unit = livens_projector_support_soman
	}
}

chem_has_livens_support_in_template = {
	OR = {
		chem_has_chlorine_livens_support_in_template = yes
		chem_has_phosgene_livens_support_in_template = yes
		chem_has_mustard_livens_support_in_template = yes
		chem_has_lewisite_livens_support_in_template = yes
		chem_has_sarin_livens_support_in_template = yes
		chem_has_soman_livens_support_in_template = yes
		FROM = { has_template_containing_unit = livens_projector_support }
	}
}

# Unit-leader scope: checks actual battalions assigned to the current leader, not country template availability.
chem_leader_has_livens_support_battalions = {
	OR = {
		check_variable = { num_battalions_with_type@livens_projector_support_chlorine > 0 }
		check_variable = { num_battalions_with_type@livens_projector_support_phosgene > 0 }
		check_variable = { num_battalions_with_type@livens_projector_support_mustard > 0 }
		check_variable = { num_battalions_with_type@livens_projector_support_lewisite > 0 }
		check_variable = { num_battalions_with_type@livens_projector_support_sarin > 0 }
		check_variable = { num_battalions_with_type@livens_projector_support_soman > 0 }
		check_variable = { num_battalions_with_type@livens_projector_support > 0 }
	}
}

chem_owner_has_chemical_weapon_tech = {
	FROM = {
		OR = {
			has_tech = chlorine_gas
			has_tech = phosgene
			has_tech = mustard_gas
			has_tech = lewisite
			has_tech = tabun
			has_tech = sarin
			has_tech = soman
		}
	}
}
