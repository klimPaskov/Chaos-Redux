# Summary: Adds deployable nerve-agent raids (air + rocket) for sarin and soman payload cylinders.

types = {

	chemical_sarin_strike = {
		days_to_prepare = 12

		category = chemical_raids
		equipment_icon = GFX_sarin_medium
		command_power = 14

		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				NOT = {
					is_in_array = {
						array = potential_and_current_enemies
						value = FROM
					}
				}
			}
			modifier = {
				factor = 2
				FROM = { is_major = yes }
			}
		}

		allowed = {
		}
		visible = {
			has_tech = sarin
		}
		show_target = {
			NOT = { is_in_faction_with = FROM }
		}
		available = {
		}
		launchable = {
			has_war_with = FROM
		}

		launch_sound = raid_launch_air

		target_type = {
			province = any
		}
		target_icon = GFX_other_target_icon

		unit_requirements = {
			equipment = {
				type = { strategic_bomber }
				amount = { min = 10 }
			}
		}
		unit_requirements = {
			equipment = {
				type = { strat_bomber_intercontinental_equipment }
				amount = { min = 10 }
			}
		}

		essential_equipment = {
			chemical_sarin_payload_cylinder = 90
		}

		starting_point = {
			types = { air_base }
		}

		arrow = {
			type = air
		}

		success_factors = {
			success = {
				base = 0.5
				experience = {
					weight = 0.1
					start_weight = -0.1
					reference = 1.0
				}
				air_defence = {
					reference = 100
					start_weight = -0.05
					weight = 0.05
				}
				air_agility = {
					reference = 100
					start_weight = -0.1
					weight = 0.1
				}
				reliability = {
					start_weight = -0.1
					weight = 0.1
				}
				air_superiority = {
					reference = 1.0
					start_weight = -0.25
					weight = 0.25
				}
				interception = {
					reference = 10
					weight = -0.25
				}
				anti_air = {
					weight = -0.05
				}
				radar = {
					weight = -0.05
				}
				intel = {
					weight = 0.2
					reference = 100
				}
			}
		}

		success_levels = {
			failure = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = raid_aborted_tt
						add_political_power = -5
					}
					raid_damage_units = {
						plane_loss = 0.6
						ratio = yes
					}
				}
			}
			limited_success = {
				actor_effects = {
					raid_damage_units = {
						plane_loss = 0.35
						ratio = yes
					}
					raid_add_unit_experience = 0.1
					var:actor_country = {
						chem_register_nerve_raid_condemnation_sarin = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_sarin_tt
						chem_apply_nerve_raid_state_effect_sarin = yes
					}
					chem_apply_nerve_raid_unit_damage_sarin_limited = yes
					var:victim_country = {
						add_war_support = -0.003
					}
				}
			}
			success = {
				custom_sound = generic_bioweapon_aerosol
				actor_effects = {
					raid_damage_units = {
						plane_loss = 0.1
						ratio = yes
					}
					raid_add_unit_experience = 0.3
					var:actor_country = {
						chem_register_nerve_raid_condemnation_sarin = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_sarin_tt
						chem_apply_nerve_raid_state_effect_sarin = yes
					}
					chem_apply_nerve_raid_unit_damage_sarin_success = yes
					var:victim_country = {
						add_war_support = -0.006
					}
				}
			}
			critical_success = {
				custom_sound = generic_bioweapon_aerosol
				actor_effects = {
					raid_add_unit_experience = 0.45
					var:actor_country = {
						chem_register_nerve_raid_condemnation_sarin = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_sarin_tt
						chem_apply_nerve_raid_state_effect_sarin = yes
					}
					chem_apply_nerve_raid_unit_damage_sarin_critical = yes
					var:victim_country = {
						add_war_support = -0.01
					}
				}
			}
		}
	}

	chemical_sarin_rocket_strike = {
		days_to_prepare = 7
		speed_multiplier = 0.08

		category = chemical_raids
		equipment_icon = GFX_sarin_medium
		command_power = 8

		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				NOT = {
					is_in_array = {
						array = potential_and_current_enemies
						value = FROM
					}
				}
			}
			modifier = {
				factor = 2
				FROM = { is_major = yes }
			}
		}

		allowed = {
		}
		visible = {
			has_tech = sarin
		}
		show_target = {
			NOT = { is_in_faction_with = FROM }
		}
		available = {
		}
		launchable = {
			has_war_with = FROM
		}

		launch_sound = raid_launch_nuclear_missile

		target_type = {
			province = any
		}
		target_icon = GFX_other_target_icon

		unit_requirements = {
			equipment = {
				type = { guided_missile_equipment }
				amount = { min = 1 }
			}
		}
		unit_requirements = {
			equipment = {
				type = { ballistic_missile_equipment }
				amount = { min = 1 }
			}
		}

		essential_equipment = {
			chemical_sarin_payload_cylinder = 90
		}

		starting_point = {
			types = { rocket_site }
		}

		arrow = {
			type = ballistic
		}

		unit_model = {
			scale = 0.5
		}

		success_factors = {
			success = {
				base = 0.8
				intel = {
					weight = 0.2
					reference = 100
				}
			}
		}

		success_levels = {
			failure = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = dud_missile_tt
						add_political_power = -3
					}
				}
			}
			limited_success = {
				actor_effects = {
					var:actor_country = {
						chem_register_nerve_raid_condemnation_sarin = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_sarin_tt
						chem_apply_nerve_raid_state_effect_sarin = yes
					}
					chem_apply_nerve_raid_unit_damage_sarin_limited = yes
					var:victim_country = {
						add_war_support = -0.003
					}
				}
			}
			success = {
				custom_sound = generic_bioweapon_aerosol
				actor_effects = {
					var:actor_country = {
						chem_register_nerve_raid_condemnation_sarin = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_sarin_tt
						chem_apply_nerve_raid_state_effect_sarin = yes
					}
					chem_apply_nerve_raid_unit_damage_sarin_success = yes
					var:victim_country = {
						add_war_support = -0.006
					}
				}
			}
			critical_success = {
				custom_sound = generic_bioweapon_aerosol
				actor_effects = {
					var:actor_country = {
						chem_register_nerve_raid_condemnation_sarin = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_sarin_tt
						chem_apply_nerve_raid_state_effect_sarin = yes
					}
					chem_apply_nerve_raid_unit_damage_sarin_critical = yes
					var:victim_country = {
						add_war_support = -0.01
					}
				}
			}
		}
	}

	chemical_soman_strike = {
		days_to_prepare = 14

		category = chemical_raids
		equipment_icon = GFX_soman_medium
		command_power = 16

		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				NOT = {
					is_in_array = {
						array = potential_and_current_enemies
						value = FROM
					}
				}
			}
			modifier = {
				factor = 2
				FROM = { is_major = yes }
			}
		}

		allowed = {
		}
		visible = {
			has_tech = soman
		}
		show_target = {
			NOT = { is_in_faction_with = FROM }
		}
		available = {
		}
		launchable = {
			has_war_with = FROM
		}

		launch_sound = raid_launch_air

		target_type = {
			province = any
		}
		target_icon = GFX_other_target_icon

		unit_requirements = {
			equipment = {
				type = { strategic_bomber }
				amount = { min = 10 }
			}
		}
		unit_requirements = {
			equipment = {
				type = { strat_bomber_intercontinental_equipment }
				amount = { min = 10 }
			}
		}

		essential_equipment = {
			chemical_soman_payload_cylinder = 75
		}

		starting_point = {
			types = { air_base }
		}

		arrow = {
			type = air
		}

		success_factors = {
			success = {
				base = 0.5
				experience = {
					weight = 0.1
					start_weight = -0.1
					reference = 1.0
				}
				air_defence = {
					reference = 100
					start_weight = -0.05
					weight = 0.05
				}
				air_agility = {
					reference = 100
					start_weight = -0.1
					weight = 0.1
				}
				reliability = {
					start_weight = -0.1
					weight = 0.1
				}
				air_superiority = {
					reference = 1.0
					start_weight = -0.25
					weight = 0.25
				}
				interception = {
					reference = 10
					weight = -0.25
				}
				anti_air = {
					weight = -0.05
				}
				radar = {
					weight = -0.05
				}
				intel = {
					weight = 0.2
					reference = 100
				}
			}
		}

		success_levels = {
			failure = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = raid_aborted_tt
						add_political_power = -5
					}
					raid_damage_units = {
						plane_loss = 0.6
						ratio = yes
					}
				}
			}
			limited_success = {
				actor_effects = {
					raid_damage_units = {
						plane_loss = 0.35
						ratio = yes
					}
					raid_add_unit_experience = 0.1
					var:actor_country = {
						chem_register_nerve_raid_condemnation_soman = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_soman_tt
						chem_apply_nerve_raid_state_effect_soman = yes
					}
					chem_apply_nerve_raid_unit_damage_soman_limited = yes
					var:victim_country = {
						add_war_support = -0.004
					}
				}
			}
			success = {
				custom_sound = generic_bioweapon_aerosol
				actor_effects = {
					raid_damage_units = {
						plane_loss = 0.1
						ratio = yes
					}
					raid_add_unit_experience = 0.3
					var:actor_country = {
						chem_register_nerve_raid_condemnation_soman = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_soman_tt
						chem_apply_nerve_raid_state_effect_soman = yes
					}
					chem_apply_nerve_raid_unit_damage_soman_success = yes
					var:victim_country = {
						add_war_support = -0.008
					}
				}
			}
			critical_success = {
				custom_sound = generic_bioweapon_aerosol
				actor_effects = {
					raid_add_unit_experience = 0.45
					var:actor_country = {
						chem_register_nerve_raid_condemnation_soman = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_soman_tt
						chem_apply_nerve_raid_state_effect_soman = yes
					}
					chem_apply_nerve_raid_unit_damage_soman_critical = yes
					var:victim_country = {
						add_war_support = -0.012
					}
				}
			}
		}
	}

	chemical_soman_rocket_strike = {
		days_to_prepare = 8
		speed_multiplier = 0.08

		category = chemical_raids
		equipment_icon = GFX_soman_medium
		command_power = 9

		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				NOT = {
					is_in_array = {
						array = potential_and_current_enemies
						value = FROM
					}
				}
			}
			modifier = {
				factor = 2
				FROM = { is_major = yes }
			}
		}

		allowed = {
		}
		visible = {
			has_tech = soman
		}
		show_target = {
			NOT = { is_in_faction_with = FROM }
		}
		available = {
		}
		launchable = {
			has_war_with = FROM
		}

		launch_sound = raid_launch_nuclear_missile

		target_type = {
			province = any
		}
		target_icon = GFX_other_target_icon

		unit_requirements = {
			equipment = {
				type = { guided_missile_equipment }
				amount = { min = 1 }
			}
		}
		unit_requirements = {
			equipment = {
				type = { ballistic_missile_equipment }
				amount = { min = 1 }
			}
		}

		essential_equipment = {
			chemical_soman_payload_cylinder = 75
		}

		starting_point = {
			types = { rocket_site }
		}

		arrow = {
			type = ballistic
		}

		unit_model = {
			scale = 0.5
		}

		success_factors = {
			success = {
				base = 0.8
				intel = {
					weight = 0.2
					reference = 100
				}
			}
		}

		success_levels = {
			failure = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = dud_missile_tt
						add_political_power = -3
					}
				}
			}
			limited_success = {
				actor_effects = {
					var:actor_country = {
						chem_register_nerve_raid_condemnation_soman = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_soman_tt
						chem_apply_nerve_raid_state_effect_soman = yes
					}
					chem_apply_nerve_raid_unit_damage_soman_limited = yes
					var:victim_country = {
						add_war_support = -0.004
					}
				}
			}
			success = {
				custom_sound = generic_bioweapon_aerosol
				actor_effects = {
					var:actor_country = {
						chem_register_nerve_raid_condemnation_soman = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_soman_tt
						chem_apply_nerve_raid_state_effect_soman = yes
					}
					chem_apply_nerve_raid_unit_damage_soman_success = yes
					var:victim_country = {
						add_war_support = -0.008
					}
				}
			}
			critical_success = {
				custom_sound = generic_bioweapon_aerosol
				actor_effects = {
					var:actor_country = {
						chem_register_nerve_raid_condemnation_soman = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_chemical_nerve_soman_tt
						chem_apply_nerve_raid_state_effect_soman = yes
					}
					chem_apply_nerve_raid_unit_damage_soman_critical = yes
					var:victim_country = {
						add_war_support = -0.012
					}
				}
			}
		}
	}
}
